
# 37s user time, 190ms system time, 26.62M rss, 73.27M vsz
# Current date: Sat Sep 26 13:01:04 2015
# Hostname: isucon5q
# Files: /tmp/slow.log
# Overall: 226.84k total, 39 unique, 230.53 QPS, 0.23x concurrency _______
# Time range: 2015-09-26 12:41:53 to 12:58:17
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           225s    29us      1s   989us   366us    15ms   247us
# Lock time            11s       0    38ms    46us    60us   103us    40us
# Rows sent        656.45k       0    1000    2.96    0.99   39.24    0.99
# Rows examine     231.55M       0 488.67k   1.05k    0.99  21.92k       0
# Query size        23.29M      11   1.05k  107.64  112.70   35.18  112.70

# Profile
# Rank Query ID           Response time Calls  R/Call V/M   Item
# ==== ================== ============= ====== ====== ===== ==============
#    1 0xDE6DD0309F9386F8 85.6634 38.2%    254 0.3373  0.00 SELECT relations
#    2 0x492C7CAB538DE80D 71.4014 31.8%    235 0.3038  0.01 SELECT footprints
#    3 0xD44150558D8295E1 47.7589 21.3% 196548 0.0002  0.00 SELECT relations
#    4 0x064A5B2042FC8316  5.7688  2.6%    182 0.0317  0.00 SELECT entries
#    5 0x831AD2FB940FC23C  3.8187  1.7%  19340 0.0002  0.00 SELECT users
# MISC 0xMISC             10.1154  4.5%  10282 0.0010   0.0 <34 ITEMS>

# Query 1: 0.30 QPS, 0.10x concurrency, ID 0xDE6DD0309F9386F8 at byte 28126932
# Scores: V/M = 0.00
# Time range: 2015-09-26 12:44:01 to 12:58:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     254
# Exec time     38     86s   183ms   426ms   337ms   356ms    36ms   339ms
# Lock time      0    12ms    29us   148us    45us    60us    10us    42us
# Rows sent      7  51.18k     174     238  206.32  223.14   14.30  202.40
# Rows examine  51 119.94M 483.48k 483.56k 483.52k 462.39k       0 462.39k
# Query size     0  21.30k      83      87   85.88   84.10    1.27   84.10
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM relations WHERE one = '2768' OR another = '2768' ORDER BY created_at DESC\G

# Query 2: 0.43 QPS, 0.13x concurrency, ID 0x492C7CAB538DE80D at byte 19720767
# Scores: V/M = 0.01
# Time range: 2015-09-26 12:49:09 to 12:58:17
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     235
# Exec time     31     71s   104us   404ms   304ms   339ms    43ms   308ms
# Lock time      0    22ms       0   278us    94us   159us    34us    80us
# Rows sent      0   4.19k       0      50   18.26   49.17   16.05    9.83
# Rows examine  48 111.16M       0 488.67k 484.36k 485.50k  44.60k 485.50k
# Query size     0  44.15k     188     193  192.37  192.76    2.50  192.76
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT user_id, owner_id, DATE(created_at) AS date, MAX(created_at) AS updated
FROM footprints
WHERE user_id = '4237'
GROUP BY user_id, owner_id, DATE(created_at)
ORDER BY updated DESC
LIMIT 10\G

# Query 3: 1.97k QPS, 0.48x concurrency, ID 0xD44150558D8295E1 at byte 28125223
# Scores: V/M = 0.00
# Time range: 2015-09-26 12:56:36 to 12:58:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         86  196548
# Exec time     21     48s    65us    34ms   242us   348us   189us   247us
# Lock time     88      9s    26us     7ms    47us    60us    40us    42us
# Rows sent     29 191.94k       1       1       1       1       0       1
# Rows examine   0   7.62k       0       2    0.04       0    0.27       0
# Query size    93  21.84M     108     118  116.49  112.70    1.00  112.70
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ##
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(1) AS cnt FROM relations WHERE (one = '72' AND another = '7') OR (one = '7' AND another = '72')\G

# Query 4: 1.82 QPS, 0.06x concurrency, ID 0x064A5B2042FC8316 at byte 12000341
# Scores: V/M = 0.00
# Time range: 2015-09-26 12:56:36 to 12:58:16
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     182
# Exec time      2      6s    18ms    66ms    32ms    40ms     6ms    30ms
# Lock time      0     7ms    26us   192us    36us    47us    12us    33us
# Rows sent     27 177.73k    1000    1000    1000    1000       0    1000
# Rows examine   0 177.73k    1000    1000    1000    1000       0    1000
# Query size     0  10.13k      57      57      57      57       0      57
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries ORDER BY created_at DESC LIMIT 1000\G

# Query 5: 22.59 QPS, 0.00x concurrency, ID 0x831AD2FB940FC23C at byte 28064642
# Scores: V/M = 0.00
# Time range: 2015-09-26 12:44:01 to 12:58:17
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   19340
# Exec time      1      4s    55us     9ms   197us   348us   199us   176us
# Lock time      6   700ms    21us   752us    36us    49us    16us    31us
# Rows sent      2  18.89k       1       1       1       1       0       1
# Rows examine   0  18.89k       1       1       1       1       0       1
# Query size     2 694.36k      34      37   36.76   36.69    0.72   36.69
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  #################################
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id = '1496'\G
