
# 33.1s user time, 150ms system time, 26.38M rss, 73.15M vsz
# Current date: Sat Sep 26 12:38:13 2015
# Hostname: isucon5q
# Files: /tmp/slow.log
# Overall: 203.08k total, 28 unique, 1.02k QPS, 1.13x concurrency ________
# Time range: 2015-09-26 12:34:51 to 12:38:11
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           226s    56us      2s     1ms   332us    22ms   138us
# Lock time             9s    21us    11ms    44us    57us    41us    40us
# Rows sent        552.33k       0    1000    2.79    0.99   38.26    0.99
# Rows examine     195.47M       0 488.63k 1009.28    0.99  21.29k       0
# Query size        20.92M      34     258  108.04  112.70   23.82  112.70

# Profile
# Rank Query ID           Response time Calls  R/Call V/M   Item
# ==== ================== ============= ====== ====== ===== ==============
#    1 0xDE6DD0309F9386F8 64.7294 28.6%    213 0.3039  0.01 SELECT relations
#    2 0x492C7CAB538DE80D 54.0426 23.9%    198 0.2729  0.01 SELECT footprints
#    3 0xCE3E456E0D0EFD1C 45.8489 20.3%    156 0.2939  1.00 SELECT comments entries
#    4 0xD44150558D8295E1 34.6466 15.3% 178062 0.0002  0.00 SELECT relations
#    5 0x57EBD74C3B600DB8  6.6342  2.9%     42 0.1580  0.21 SELECT entries
#    6 0x064A5B2042FC8316  4.5195  2.0%    156 0.0290  0.00 SELECT entries
#    7 0x1C45DD38588C2153  3.0469  1.3%   1956 0.0016  0.03 SELECT entries
#    8 0x831AD2FB940FC23C  2.4024  1.1%  15890 0.0002  0.00 SELECT users
# MISC 0xMISC             10.1370  4.5%   6403 0.0016   0.0 <20 ITEMS>

# Query 1: 1.31 QPS, 0.40x concurrency, ID 0xDE6DD0309F9386F8 at byte 31536936
# Scores: V/M = 0.01
# Time range: 2015-09-26 12:34:53 to 12:37:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     213
# Exec time     28     65s   176ms   420ms   304ms   356ms    53ms   323ms
# Lock time      0    11ms    28us   223us    50us    80us    22us    42us
# Rows sent      7  41.88k     174     234  201.32  223.14   14.15  192.76
# Rows examine  51 100.57M 483.48k 483.54k 483.51k 462.39k       0 462.39k
# Query size     0  17.94k      83      87   86.26   84.10    0.85   84.10
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM relations WHERE one = '200' OR another = '200' ORDER BY created_at DESC\G

# Query 2: 1.45 QPS, 0.39x concurrency, ID 0x492C7CAB538DE80D at byte 31574728
# Scores: V/M = 0.01
# Time range: 2015-09-26 12:35:18 to 12:37:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     198
# Exec time     23     54s   154ms   398ms   273ms   308ms    48ms   279ms
# Lock time      0    20ms    46us   354us   100us   152us    37us    84us
# Rows sent      0   3.57k      10      50   18.48   49.17   16.08    9.83
# Rows examine  48  94.46M 488.39k 488.63k 488.50k 485.50k       0 485.50k
# Query size     0  37.25k     191     193  192.64  192.76       1  192.76
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT user_id, owner_id, DATE(created_at) AS date, MAX(created_at) AS updated
FROM footprints
WHERE user_id = '4675'
GROUP BY user_id, owner_id, DATE(created_at)
ORDER BY updated DESC
LIMIT 10\G

# Query 3: 1.13 QPS, 0.33x concurrency, ID 0xCE3E456E0D0EFD1C at byte 1077206
# Scores: V/M = 1.00
# Time range: 2015-09-26 12:35:17 to 12:37:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     156
# Exec time     20     46s     3ms      2s   294ms      1s   543ms     6ms
# Lock time      0    12ms    47us   257us    75us   119us    24us    66us
# Rows sent      0   1.52k      10      10      10      10       0      10
# Rows examine   0 108.74k     710     724  713.76  719.66       7  685.39
# Query size     0  34.37k     224     226  225.63  223.14       0  223.14
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ##
# 100ms  #
#    1s  ##################
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT c.id AS id, c.entry_id AS entry_id, c.user_id AS user_id, c.comment AS comment, c.created_at AS created_at
FROM comments c
JOIN entries e ON c.entry_id = e.id
WHERE e.user_id = '3943'
ORDER BY c.created_at DESC
LIMIT 10\G

# Query 4: 1.01k QPS, 0.20x concurrency, ID 0xD44150558D8295E1 at byte 2100584
# Scores: V/M = 0.00
# Time range: 2015-09-26 12:34:58 to 12:37:55
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         87  178062
# Exec time     15     35s    65us    32ms   194us   332us   200us   138us
# Lock time     89      8s    26us    11ms    45us    57us    43us    40us
# Rows sent     31 173.89k       1       1       1       1       0       1
# Rows examine   0   6.59k       0       2    0.04       0    0.27       0
# Query size    94  19.84M     108     118  116.82  112.70    0.78  112.70
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  #####
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(1) AS cnt FROM relations WHERE (one = '2396' AND another = '926') OR (one = '926' AND another = '2396')\G

# Query 5: 0.69 QPS, 0.11x concurrency, ID 0x57EBD74C3B600DB8 at byte 19103367
# Scores: V/M = 0.21
# Time range: 2015-09-26 12:36:16 to 12:37:17
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      42
# Exec time      2      7s   650us   475ms   158ms   412ms   184ms     2ms
# Lock time      0     3ms    31us   194us    59us    76us    31us    49us
# Rows sent      0     840      20      20      20      20       0      20
# Rows examine   0     924      20      25      22   23.65    1.39   21.45
# Query size     0   3.76k      90      92   91.64   88.31       0   88.31
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ######################
#  10ms  #######
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE user_id = '2835' AND private=0 ORDER BY created_at DESC LIMIT 20\G

# Query 6: 1.13 QPS, 0.03x concurrency, ID 0x064A5B2042FC8316 at byte 10275251
# Scores: V/M = 0.00
# Time range: 2015-09-26 12:35:17 to 12:37:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     156
# Exec time      1      5s    17ms    55ms    29ms    36ms     5ms    28ms
# Lock time      0     7ms    28us    94us    43us    80us    14us    36us
# Rows sent     27 152.34k    1000    1000    1000    1000       0    1000
# Rows examine   0 152.34k    1000    1000    1000    1000       0    1000
# Query size     0   8.68k      57      57      57      57       0      57
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries ORDER BY created_at DESC LIMIT 1000\G

# Query 7: 11.93 QPS, 0.02x concurrency, ID 0x1C45DD38588C2153 at byte 3103241
# Scores: V/M = 0.03
# Time range: 2015-09-26 12:34:51 to 12:37:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1956
# Exec time      1      3s    74us    80ms     2ms     9ms     6ms   159us
# Lock time      0    76ms    24us   979us    39us    49us    25us    35us
# Rows sent      0   1.91k       1       1       1       1       0       1
# Rows examine   0   1.91k       1       1       1       1       0       1
# Query size     0  77.91k      38      41   40.79   40.45    0.78   40.45
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ###
# 100us  ################################################################
#   1ms  #
#  10ms  ###
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE id = '363621'\G

# Query 8: 96.89 QPS, 0.01x concurrency, ID 0x831AD2FB940FC23C at byte 32847010
# Scores: V/M = 0.00
# Time range: 2015-09-26 12:34:51 to 12:37:35
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   15890
# Exec time      1      2s    56us    12ms   151us   287us   172us    93us
# Lock time      6   556ms    21us     1ms    34us    47us    22us    31us
# Rows sent      2  15.52k       1       1       1       1       0       1
# Rows examine   0  15.52k       1       1       1       1       0       1
# Query size     2 570.60k      34      37   36.77   36.69    0.72   36.69
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #######################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id = '4208'\G
