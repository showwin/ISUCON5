
# 81s user time, 640ms system time, 26.02M rss, 73.29M vsz
# Current date: Sat Sep 26 14:43:26 2015
# Hostname: isucon5q
# Files: /tmp/slow.log
# Overall: 476.90k total, 30 unique, 6.53k QPS, 1.80x concurrency ________
# Time range: 2015-09-26 14:40:12 to 14:41:25
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           131s    51us      3s   275us   125us    13ms    84us
# Lock time            21s    21us    63ms    44us    57us   130us    38us
# Rows sent          1.25M       0    1000    2.75    0.99   37.89    0.99
# Rows examine       1.15M       0    1000    2.52    0.99   40.50       0
# Query size        34.56M      34   1.20k   76.00   76.28   32.08   76.28

# Profile
# Rank Query ID           Response time Calls  R/Call V/M   Item
# ==== ================== ============= ====== ====== ===== ==============
#    1 0x62846952A407BC67 49.9279 38.1%    365 0.1368  1.37 SELECT comments users
#    2 0x975052A65FC1456C 40.1168 30.6% 424428 0.0001  0.00 SELECT relations
#    3 0x064A5B2042FC8316 12.4783  9.5%    365 0.0342  0.02 SELECT entries
#    4 0xC2B6AC7BA77EC625  5.1275  3.9%    519 0.0099  0.02 INSERT footprints
#    5 0x2D243C679322D8C8  3.8478  2.9%    365 0.0105  0.00 SELECT comments
#    6 0x4E82CA2C1050CFF8  3.7398  2.9%    365 0.0102  0.07 SELECT footprints users
#    7 0x831AD2FB940FC23C  2.8782  2.2%  29924 0.0001  0.00 SELECT users
#    8 0x57EBD74C3B600DB8  2.1580  1.6%    101 0.0214  0.09 SELECT entries
#    9 0xE334E57B5FA67DD1  2.1517  1.6%    496 0.0043  0.05 SELECT relations
#   10 0x1C45DD38588C2153  1.3696  1.0%   4464 0.0003  0.02 SELECT entries
#   11 0x3CB559B079F57927  1.1143  0.8%    115 0.0097  0.02 INSERT comments
# MISC 0xMISC              6.2620  4.8%  15390 0.0004   0.0 <19 ITEMS>

# Query 1: 5.21 QPS, 0.71x concurrency, ID 0x62846952A407BC67 at byte 2843
# This item is included in the report because it matches --limit.
# Scores: V/M = 1.37
# Time range: 2015-09-26 14:40:15 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     365
# Exec time     38     50s     2ms      3s   137ms      1s   433ms     2ms
# Lock time      0    64ms    98us   939us   176us   204us    54us   167us
# Rows sent      0   3.56k      10      10      10      10       0      10
# Rows examine   9 115.12k     320     331  322.96  313.99    1.82  313.99
# Query size     1 413.29k   1.10k   1.20k   1.13k   1.14k   24.44   1.09k
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #
# 100ms  #
#    1s  ######
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
select c.id, c.entry_id, c.user_id, c.comment, c.created_at, users.account_name as account_name, users.nick_name as nick_name
    from comments as c
    inner join users on users.id = c.user_id
    where c.entry_id in ('1611','2449','3752','4742','17406','31779','33509','33643','40213','41640','44587','51531','51589','54584','56239','56440','74510','87379','90920','99273'/*... omitted 80 items ...*/)
    order by c.created_at desc
    limit 10\G

# Query 2: 6.15k QPS, 0.58x concurrency, ID 0x975052A65FC1456C at byte 210946
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 14:40:16 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         88  424428
# Exec time     30     40s    51us    44ms    94us   113us   194us    84us
# Lock time     88     19s    22us    31ms    44us    57us    84us    38us
# Rows sent     32 414.48k       1       1       1       1       0       1
# Rows examine   0   7.47k       0       1    0.02       0    0.13       0
# Query size    92  31.85M      74      79   78.68   76.28    0.31   76.28
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ##############
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS cnt FROM relations WHERE (one = '4982' AND another = '3829')\G

# Query 3: 5.29 QPS, 0.18x concurrency, ID 0x064A5B2042FC8316 at byte 4162
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2015-09-26 14:40:16 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     365
# Exec time      9     12s    20ms   474ms    34ms    42ms    23ms    31ms
# Lock time      0    15ms    26us   338us    41us    54us    21us    35us
# Rows sent     27 356.45k    1000    1000    1000    1000       0    1000
# Rows examine  30 356.45k    1000    1000    1000    1000       0    1000
# Query size     0  20.32k      57      57      57      57       0      57
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries ORDER BY created_at DESC LIMIT 1000\G

# Query 4: 8.24 QPS, 0.08x concurrency, ID 0xC2B6AC7BA77EC625 at byte 92194153
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2015-09-26 14:40:21 to 14:41:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     519
# Exec time      3      5s     2ms   224ms    10ms    23ms    13ms     7ms
# Lock time      0    23ms    24us   242us    44us    63us    16us    40us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  32.33k      62      64   63.80   62.76    0.45   62.76
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
INSERT INTO footprints (user_id,owner_id) VALUES ('3447','1113')\G

# Query 5: 5.29 QPS, 0.06x concurrency, ID 0x2D243C679322D8C8 at byte 48269135
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 14:40:16 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     365
# Exec time      2      4s     5ms    46ms    11ms    16ms     3ms    10ms
# Lock time      0    16ms    25us     1ms    45us    57us    60us    38us
# Rows sent     27 356.45k    1000    1000    1000    1000       0    1000
# Rows examine  30 356.45k    1000    1000    1000    1000       0    1000
# Query size     0  20.67k      58      58      58      58       0      58
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  #########################################
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM comments ORDER BY created_at DESC LIMIT 1000\G

# Query 6: 5.29 QPS, 0.05x concurrency, ID 0x4E82CA2C1050CFF8 at byte 200471
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.07
# Time range: 2015-09-26 14:40:16 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     365
# Exec time      2      4s     1ms   190ms    10ms    53ms    27ms     3ms
# Lock time      0    55ms    59us    16ms   151us   131us   816us    98us
# Rows sent      0   3.56k      10      10      10      10       0      10
# Rows examine  10 121.11k     310     419  339.76  363.48   23.12  329.68
# Query size     0 114.73k     320     322  321.88  313.99       0  313.99
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT f.user_id, f.owner_id, DATE(f.created_at) AS date, MAX(f.created_at) AS updated, users.account_name as account_name, users.nick_name as nick_name
FROM footprints as f
INNER JOIN users ON users.id = f.owner_id
WHERE f.user_id = '92'
GROUP BY f.user_id, f.owner_id, DATE(f.created_at)
ORDER BY updated DESC
LIMIT 10\G

# Query 7: 433.68 QPS, 0.04x concurrency, ID 0x831AD2FB940FC23C at byte 41305507
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 14:40:16 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   29924
# Exec time      2      3s    54us     4ms    96us   119us    77us    84us
# Lock time      5      1s    21us     4ms    40us    54us    58us    33us
# Rows sent      2  29.22k       1       1       1       1       0       1
# Rows examine   2  29.22k       1       1       1       1       0       1
# Query size     3   1.05M      34      37   36.79   36.69    0.69   36.69
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ####################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id = '1733'\G

# Query 8: 1.66 QPS, 0.04x concurrency, ID 0x57EBD74C3B600DB8 at byte 12214879
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.09
# Time range: 2015-09-26 14:40:23 to 14:41:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     101
# Exec time      1      2s   434us   172ms    21ms   122ms    44ms   839us
# Lock time      0     5ms    30us   258us    52us    66us    27us    44us
# Rows sent      0   1.97k      20      20      20      20       0      20
# Rows examine   0   2.34k      20      28   23.73   26.08    1.80   23.65
# Query size     0   9.06k      90      92   91.88   88.31       0   88.31
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #############
#  10ms  ######
# 100ms  ############
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE user_id = '4108' AND private=0 ORDER BY created_at DESC LIMIT 20\G

# Query 9: 7.19 QPS, 0.03x concurrency, ID 0xE334E57B5FA67DD1 at byte 2166323
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.05
# Time range: 2015-09-26 14:40:16 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     496
# Exec time      1      2s   441us   120ms     4ms    22ms    15ms   881us
# Lock time      0    22ms    26us   664us    44us    54us    30us    38us
# Rows sent      3  47.48k      79     111   98.03  107.34    7.84   97.36
# Rows examine   8  94.96k     158     222  196.05  212.52   15.98  192.76
# Query size     0  32.39k      65      67   66.87   65.89    0.24   65.89
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #############################
#  10ms  #####
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM relations WHERE one = '1947' ORDER BY created_at DESC\G

# Query 10: 64.70 QPS, 0.02x concurrency, ID 0x1C45DD38588C2153 at byte 4825039
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2015-09-26 14:40:16 to 14:41:25
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    4464
# Exec time      1      1s    66us    50ms   306us   159us     2ms   113us
# Lock time      0   184ms    22us     2ms    41us    54us    42us    36us
# Rows sent      0   4.36k       1       1       1       1       0       1
# Rows examine   0   4.36k       1       1       1       1       0       1
# Query size     0 177.94k      38      41   40.82   40.45    0.74   40.45
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  #######
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE id = '87439'\G

# Query 11: 1.83 QPS, 0.02x concurrency, ID 0x3CB559B079F57927 at byte 48268291
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.02
# Time range: 2015-09-26 14:40:21 to 14:41:24
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     115
# Exec time      0      1s     2ms   138ms    10ms    19ms    15ms     6ms
# Lock time      0     5ms    26us    64us    42us    57us     8us    40us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0   9.71k      82      87   86.50   84.10    0.37   84.10
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ################################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
INSERT INTO comments (entry_id, user_id, comment) VALUES ('496077','2283','342559562')\G
