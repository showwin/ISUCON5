
# 6.8s user time, 20ms system time, 26.54M rss, 73.03M vsz
# Current date: Sat Sep 26 11:58:13 2015
# Hostname: isucon5q
# Files: /tmp/slow.log
# Overall: 40.26k total, 28 unique, 490.95 QPS, 0.91x concurrency ________
# Time range: 2015-09-26 11:55:56 to 11:57:18
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time            75s    54us      3s     2ms   131us    56ms    89us
# Lock time             1s    21us   571us    34us    49us    11us    28us
# Rows sent        118.19k       0    1000    3.01    0.99   40.68    0.99
# Rows examine      42.32M       0 488.47k   1.08k    0.99  22.24k       0
# Query size         4.14M      34     260  107.87  112.70   24.34  112.70

# Profile
# Rank Query ID           Response time Calls R/Call V/M   Item
# ==== ================== ============= ===== ====== ===== ===============
#    1 0xCE3E456E0D0EFD1C 46.3752 61.8%    35 1.3250  1.33 SELECT comments entries
#    2 0xDE6DD0309F9386F8  8.9579 11.9%    47 0.1906  0.00 SELECT relations
#    3 0x492C7CAB538DE80D  6.9716  9.3%    42 0.1660  0.00 SELECT footprints
#    4 0xD44150558D8295E1  3.4379  4.6% 35172 0.0001  0.00 SELECT relations
#    5 0x57EBD74C3B600DB8  2.7615  3.7%     8 0.3452  0.04 SELECT entries
#    6 0x1C45DD38588C2153  1.9503  2.6%   431 0.0045  0.02 SELECT entries
#    7 0xEE72BAA1F364AF3A  1.4687  2.0%    43 0.0342  0.08 SELECT entries
# MISC 0xMISC              3.0630  4.1%  4480 0.0007   0.0 <21 ITEMS>

# Query 1: 0.45 QPS, 0.59x concurrency, ID 0xCE3E456E0D0EFD1C at byte 792380
# Scores: V/M = 1.33
# Time range: 2015-09-26 11:55:59 to 11:57:17
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      35
# Exec time     61     46s     4ms      3s      1s      3s      1s    61ms
# Lock time      0     3ms    45us   190us    79us   125us    28us    69us
# Rows sent      0     350      10      10      10      10       0      10
# Rows examine   0  24.30k     710     713  710.89  685.39       0  685.39
# Query size     0   7.71k     224     226  225.66  223.14       0  223.14
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ########################################################
#  10ms  ###########
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT c.id AS id, c.entry_id AS entry_id, c.user_id AS user_id, c.comment AS comment, c.created_at AS created_at
FROM comments c
JOIN entries e ON c.entry_id = e.id
WHERE e.user_id = '3473'
ORDER BY c.created_at DESC
LIMIT 10\G

# Query 2: 0.59 QPS, 0.11x concurrency, ID 0xDE6DD0309F9386F8 at byte 1444587
# Scores: V/M = 0.00
# Time range: 2015-09-26 11:55:59 to 11:57:18
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      47
# Exec time     11      9s   181ms   241ms   191ms   198ms    10ms   180ms
# Lock time      0     2ms    27us    74us    40us    57us    11us    38us
# Rows sent      7   9.15k     172     238  199.40  234.30   18.97  192.76
# Rows examine  52  22.19M 483.47k 483.54k 483.50k 462.39k       0 462.39k
# Query size     0   3.96k      83      87   86.32   84.10    0.81   84.10
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM relations WHERE one = '2227' OR another = '2227' ORDER BY created_at DESC\G

# Query 3: 0.54 QPS, 0.09x concurrency, ID 0x492C7CAB538DE80D at byte 1945939
# Scores: V/M = 0.00
# Time range: 2015-09-26 11:56:00 to 11:57:18
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      42
# Exec time      9      7s   160ms   204ms   166ms   171ms     9ms   163ms
# Lock time      0     5ms    53us   167us   119us   144us    29us   125us
# Rows sent      0     700      10      50   16.67   49.17   14.66    9.83
# Rows examine  47  20.03M 488.39k 488.47k 488.42k 485.50k       0 485.50k
# Query size     0   7.90k     191     193  192.67  192.76       1  192.76
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT user_id, owner_id, DATE(created_at) AS date, MAX(created_at) AS updated
FROM footprints
WHERE user_id = '3677'
GROUP BY user_id, owner_id, DATE(created_at)
ORDER BY updated DESC
LIMIT 10\G

# Query 4: 445.22 QPS, 0.04x concurrency, ID 0xD44150558D8295E1 at byte 9255111
# Scores: V/M = 0.00
# Time range: 2015-09-26 11:55:59 to 11:57:18
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         87   35172
# Exec time      4      3s    62us     2ms    97us   131us    26us    89us
# Lock time     88      1s    27us   571us    34us    49us    10us    28us
# Rows sent     29  34.35k       1       1       1       1       0       1
# Rows examine   0   1.50k       0       2    0.04       0    0.29       0
# Query size    94   3.92M     108     118  116.91  112.70    0.72  112.70
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  ###############################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(1) AS cnt FROM relations WHERE (one = '2665' AND another = '3660') OR (one = '3660' AND another = '2665')\G

# Query 5: 0.16 QPS, 0.05x concurrency, ID 0x57EBD74C3B600DB8 at byte 2865688
# Scores: V/M = 0.04
# Time range: 2015-09-26 11:56:10 to 11:57:01
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       8
# Exec time      3      3s    53ms   428ms   345ms   412ms   110ms   374ms
# Lock time      0   338us    34us    55us    42us    54us     7us    44us
# Rows sent      0     160      20      20      20      20       0      20
# Rows examine   0     184      22      24      23   23.65    0.55   22.53
# Query size     0     733      91      92   91.62   88.31       0   88.31
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  #########
# 100ms  ################################################################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE user_id = '3343' AND private=0 ORDER BY created_at DESC LIMIT 20\G

# Query 6: 5.46 QPS, 0.02x concurrency, ID 0x1C45DD38588C2153 at byte 10150388
# Scores: V/M = 0.02
# Time range: 2015-09-26 11:55:59 to 11:57:18
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1     431
# Exec time      2      2s    73us    59ms     5ms    28ms    10ms   125us
# Lock time      0    13ms    23us    65us    30us    44us     7us    25us
# Rows sent      0     431       1       1       1       1       0       1
# Rows examine   0     431       1       1       1       1       0       1
# Query size     0  17.16k      38      41   40.77   40.45    0.80   40.45
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ############################################
# 100us  ################################################################
#   1ms  #
#  10ms  ########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE id = '302355'\G

# Query 7: 0.53 QPS, 0.02x concurrency, ID 0xEE72BAA1F364AF3A at byte 792131
# Scores: V/M = 0.08
# Time range: 2015-09-26 11:55:56 to 11:57:17
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      43
# Exec time      1      1s   177us   157ms    34ms   116ms    52ms   316us
# Lock time      0     2ms    25us    75us    41us    54us    11us    36us
# Rows sent      0     215       5       5       5       5       0       5
# Rows examine   0     215       5       5       5       5       0       5
# Query size     0   3.01k      70      72   71.67   69.19       0   69.19
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms
#  10ms  ####
# 100ms  #######################
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE user_id = '3473' ORDER BY created_at LIMIT 5\G
