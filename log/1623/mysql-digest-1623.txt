
# 31.6s user time, 170ms system time, 26.67M rss, 73.41M vsz
# Current date: Sat Sep 26 16:24:26 2015
# Hostname: isucon5q
# Files: /tmp/slow.log
# Overall: 197.83k total, 33 unique, 1.01k QPS, 0.53x concurrency ________
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           104s    53us   682ms   525us   972us     4ms    98us
# Lock time             8s       0    10ms    41us    57us    40us    35us
# Rows sent          3.21M       0    1000   17.03    9.83  111.43    0.99
# Rows examine       4.68M       0    1000   24.78  112.70  120.81    0.99
# Query size        10.47M      16   1.34k   55.51   72.65   97.53   36.69

# Profile
# Rank Query ID           Response time Calls  R/Call V/M   Item
# ==== ================== ============= ====== ====== ===== ==============
#    1 0xC248D5E6AD78D4EC 35.3085 33.9%   1324 0.0267  0.00 SELECT entries
#    2 0xC2B6AC7BA77EC625 12.0414 11.6%   2005 0.0060  0.00 INSERT footprints
#    3 0xB6C9AE49826E49AB 11.4151 11.0%   1324 0.0086  0.00 SELECT comments
#    4 0x831AD2FB940FC23C 10.3605 10.0% 108986 0.0001  0.00 SELECT users
#    5 0x4E82CA2C1050CFF8  5.4310  5.2%   1324 0.0041  0.00 SELECT footprints users
#    6 0x8D18DC589799D235  3.9071  3.8%    879 0.0044  0.32 SELECT entries
#    7 0x043FEFA227769B85  3.1964  3.1%  25440 0.0001  0.00 SELECT comments
#    8 0xFA92BE7FCDD6EF73  3.0574  2.9%    774 0.0040  0.16 SELECT entries
#    9 0xE4EC90D0299A2D47  2.6169  2.5%    418 0.0063  0.00 INSERT entries
#   10 0x3CB559B079F57927  2.4603  2.4%    434 0.0057  0.00 INSERT comments
#   11 0xB1816B094192C8A0  2.2907  2.2%   1324 0.0017  0.01 SELECT comments users
#   12 0x1C45DD38588C2153  2.0345  2.0%  15834 0.0001  0.00 SELECT entries
#   13 0x5295A5EC8F9B4BD5  1.8046  1.7%   1784 0.0010  0.00 SELECT relations
#   14 0xD2FCE26E024AF85E  1.5740  1.5%  12540 0.0001  0.00 SELECT entries
#   15 0x492C7CAB538DE80D  1.4904  1.4%    421 0.0035  0.00 SELECT footprints
# MISC 0xMISC              5.0619  4.9%  23019 0.0002   0.0 <18 ITEMS>

# Query 1: 6.79 QPS, 0.18x concurrency, ID 0xC248D5E6AD78D4EC at byte 11645006
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1324
# Exec time     33     35s    15ms    57ms    27ms    36ms     5ms    26ms
# Lock time      0    51ms    23us   476us    38us    52us    18us    33us
# Rows sent     39   1.26M    1000    1000    1000    1000       0    1000
# Rows examine  27   1.26M    1000    1000    1000    1000       0    1000
# Query size     0  63.36k      49      49      49      49       0      49
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms  ################################################################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries ORDER BY id DESC LIMIT 1000\G

# Query 2: 31.83 QPS, 0.19x concurrency, ID 0xC2B6AC7BA77EC625 at byte 18055574
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:22:04 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          1    2005
# Exec time     11     12s     1ms    97ms     6ms    14ms     5ms     5ms
# Lock time      1    86ms    24us     1ms    42us    57us    35us    38us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 123.44k      60      64   63.04   62.76    1.34   62.76
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ########
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
INSERT INTO footprints (user_id,owner_id) VALUES ('279','136')\G

# Query 3: 6.79 QPS, 0.06x concurrency, ID 0xB6C9AE49826E49AB at byte 8992154
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1324
# Exec time     10     11s     3ms    33ms     9ms    14ms     3ms     8ms
# Lock time      0    60ms    26us   491us    45us    60us    19us    40us
# Rows sent     39   1.26M    1000    1000    1000    1000       0    1000
# Rows examine  27   1.26M    1000    1000    1000    1000       0    1000
# Query size     0  64.65k      50      50      50      50       0      50
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM comments ORDER BY id DESC LIMIT 1000\G

# Query 4: 558.90 QPS, 0.05x concurrency, ID 0x831AD2FB940FC23C at byte 15660721
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         55  108986
# Exec time      9     10s    53us     9ms    95us   119us    62us    84us
# Lock time     51      4s    19us     3ms    38us    52us    25us    33us
# Rows sent      3 106.43k       1       1       1       1       0       1
# Rows examine   2 106.43k       1       1       1       1       0       1
# Query size    36   3.82M      34      37   36.76   36.69    0.72   36.69
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ################################################################
# 100us  #######################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM users WHERE id = '4186'\G

# Query 5: 6.79 QPS, 0.03x concurrency, ID 0x4E82CA2C1050CFF8 at byte 13962448
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1324
# Exec time      5      5s     1ms    69ms     4ms     8ms     3ms     3ms
# Lock time      1   132ms    56us     3ms    99us   125us    72us    93us
# Rows sent      0  12.93k      10      10      10      10       0      10
# Rows examine  11 540.66k     310     581  418.15  537.02   68.63  400.73
# Query size     3 415.74k     320     322  321.54  313.99       0  313.99
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT f.user_id, f.owner_id, DATE(f.created_at) AS date, MAX(f.created_at) AS updated, users.account_name as account_name, users.nick_name as nick_name
FROM footprints as f
INNER JOIN users ON users.id = f.owner_id
WHERE f.user_id = '556'
GROUP BY f.user_id, f.owner_id, DATE(f.created_at)
ORDER BY updated DESC
LIMIT 10\G

# Query 6: 14.18 QPS, 0.06x concurrency, ID 0x8D18DC589799D235 at byte 35295203
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.32
# Time range: 2015-09-26 16:22:05 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     879
# Exec time      3      4s   357us   682ms     4ms     2ms    38ms   925us
# Lock time      0    40ms    27us   707us    46us    60us    30us    40us
# Rows sent      0  17.17k      20      20      20      20       0      20
# Rows examine   2 112.26k     120     147  130.77  136.99    7.25  124.25
# Query size     0  59.70k      68      70   69.55   69.19       1   69.19
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #############################################
#  10ms  ###
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE user_id = '556' ORDER BY id DESC LIMIT 20\G

# Query 7: 410.32 QPS, 0.05x concurrency, ID 0x043FEFA227769B85 at byte 40155435
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:22:05 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         12   25440
# Exec time      3      3s    69us    15ms   125us   159us   106us   113us
# Lock time     12      1s    20us     3ms    40us    54us    30us    35us
# Rows sent      0  24.84k       1       1       1       1       0       1
# Rows examine   0  22.35k       0       8    0.90    2.90    1.22    0.99
# Query size    13   1.46M      60      60      60      60       0      60
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ######
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS c FROM comments WHERE entry_id = '501676'\G

# Query 8: 12.29 QPS, 0.05x concurrency, ID 0xFA92BE7FCDD6EF73 at byte 1599608
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.16
# Time range: 2015-09-26 16:22:04 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     774
# Exec time      2      3s   399us   405ms     4ms     1ms    25ms   761us
# Lock time      0    38ms    29us   858us    49us    63us    30us    44us
# Rows sent      0   3.78k       5       5       5       5       0       5
# Rows examine   1  87.40k     105     132  115.63  124.25    7.20  112.70
# Query size     0  58.59k      76      78   77.51   76.28       1   76.28
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE user_id = '2835' AND private=0 ORDER BY id LIMIT 5\G

# Query 9: 6.74 QPS, 0.04x concurrency, ID 0xE4EC90D0299A2D47 at byte 39026043
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:22:04 to 16:23:06
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     418
# Exec time      2      3s     1ms    83ms     6ms    13ms     6ms     5ms
# Lock time      0    18ms    27us   193us    43us    60us    13us    38us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  38.87k      76     115   95.21  112.70   12.75   97.36
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #######
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
INSERT INTO entries (user_id, private, body) VALUES ('1794','1','597119202\n1734842560\n1100060139\n627927789\n')\G

# Query 10: 6.89 QPS, 0.04x concurrency, ID 0x3CB559B079F57927 at byte 18448978
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:22:04 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     434
# Exec time      2      2s     1ms    26ms     6ms    13ms     3ms     4ms
# Lock time      0    18ms    25us   197us    42us    57us    13us    38us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  36.43k      83      87   85.95   84.10    1.10   84.10
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #######
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
INSERT INTO comments (entry_id, user_id, comment) VALUES ('493213','1877','2019849861')\G

# Query 11: 6.79 QPS, 0.01x concurrency, ID 0xB1816B094192C8A0 at byte 13811482
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1324
# Exec time      2      2s   876us   149ms     2ms     2ms     4ms     2ms
# Lock time      2   238ms    95us     2ms   179us   214us    82us   167us
# Rows sent      0  12.93k      10      10      10      10       0      10
# Rows examine   8 427.76k     320     347  330.83  329.68    8.14  329.68
# Query size    14   1.54M   1.09k   1.34k   1.19k   1.26k   63.62   1.14k
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  #
#   1ms  ################################################################
#  10ms
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'comments'\G
#    SHOW CREATE TABLE `comments`\G
#    SHOW TABLE STATUS LIKE 'users'\G
#    SHOW CREATE TABLE `users`\G
# EXPLAIN /*!50100 PARTITIONS*/
select c.id, c.entry_id, c.user_id, c.comment, c.created_at, users.account_name as account_name, users.nick_name as nick_name
    from comments as c
    inner join users on users.id = c.user_id
    where c.entry_id in ('1707','2615','5266','6131','7736','11246','21409','26201','28299','32938','37846','38332','38709','42299','43414','44609','47165','58021','61634','61886'/*... omitted 80 items ...*/)
    order by c.id desc
    limit 10\G

# Query 12: 81.20 QPS, 0.01x concurrency, ID 0x1C45DD38588C2153 at byte 38222317
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          8   15834
# Exec time      1      2s    63us     8ms   128us   159us   142us   113us
# Lock time      7   659ms    22us     8ms    41us    54us    62us    36us
# Rows sent      0  15.46k       1       1       1       1       0       1
# Rows examine   0  15.46k       1       1       1       1       0       1
# Query size     5 631.13k      38      41   40.82   40.45    0.74   40.45
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ###########
# 100us  ################################################################
#   1ms  #
#  10ms
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE id = '501890'\G

# Query 13: 9.15 QPS, 0.01x concurrency, ID 0x5295A5EC8F9B4BD5 at byte 29948530
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1784
# Exec time      1      2s   350us    13ms     1ms     2ms   827us   799us
# Lock time      0    78ms    26us   561us    43us    57us    18us    38us
# Rows sent      5 175.03k      87     119  100.46  112.70    7.71   97.36
# Rows examine   7 350.05k     174     238  200.93  223.14   14.42  202.40
# Query size     0 101.99k      57      59   58.54   56.92       0   56.92
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  ##########################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'relations'\G
#    SHOW CREATE TABLE `relations`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM relations WHERE one = '2413' ORDER BY id DESC\G

# Query 14: 64.31 QPS, 0.01x concurrency, ID 0xD2FCE26E024AF85E at byte 2480643
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:19:52 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   12540
# Exec time      1      2s    62us    10ms   125us   159us   136us   113us
# Lock time      6   510ms    22us     1ms    40us    54us    24us    36us
# Rows sent      0  12.25k       1       1       1       1       0       1
# Rows examine   0  12.25k       1       1       1       1       0       1
# Query size     5 573.15k      44      47   46.80   46.83    0.88   46.83
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us  ###########
# 100us  ################################################################
#   1ms  #
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'entries'\G
#    SHOW CREATE TABLE `entries`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM entries WHERE id='495648' limit 1\G

# Query 15: 6.79 QPS, 0.02x concurrency, ID 0x492C7CAB538DE80D at byte 13637774
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2015-09-26 16:22:05 to 16:23:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     421
# Exec time      1      1s     1ms    20ms     4ms     8ms     2ms     3ms
# Lock time      0    29ms    42us   267us    69us    93us    23us    63us
# Rows sent      0  20.56k      50      50      50      50       0      50
# Rows examine   2 128.77k     254     394  313.22  363.48   35.04  299.03
# Query size     0  79.16k     191     193  192.55  192.76       1  192.76
# String:
# Hosts        localhost
# Users        root
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS LIKE 'footprints'\G
#    SHOW CREATE TABLE `footprints`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT user_id, owner_id, DATE(created_at) AS date, MAX(created_at) as updated
FROM footprints
WHERE user_id = '412'
GROUP BY user_id, owner_id, DATE(created_at)
ORDER BY updated DESC
LIMIT 50\G
